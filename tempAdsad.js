const AWS = require('aws-sdk')

const s3 = new AWS.S3({
    accessKeyId: 'AKIAJFWDWQM7QJIUFYOA',
    secretAccessKey: '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',
    region: 'ap-south-1'
});

module.exports.handler = function(event, context, callback) {
   const params = {
       Bucket: 'gobest',
       Key: event.file.originalname,
       Body: event.file.buffer,
       ACL: 'public-read'
   }                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         

   s3.upload(params, (err, data) => {
       if(err)
       callback(err, null);
       else
       callback(null, data.Location);
   })
};
